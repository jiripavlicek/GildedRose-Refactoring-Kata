<?php

require_once 'gilded_rose.php';

class GildedRoseTest extends PHPUnit_Framework_TestCase {

    /**
     * @test
     * @dataProvider providerUpdateQuality
     */
    public function testUpdateQuality($name, $sell_in, $quality, $qualityExpected) {
        $items = array(new Item($name, $sell_in, $quality));
        $gildedRose = new GildedRose($items);
        for ($i = 1; $i <= 27; $i++) {
            $gildedRose->update_quality();
            $this->assertEquals($qualityExpected[$i], $items[0]->quality);
        }
    }

    public function providerUpdateQuality() {
        return [
            ['+5 Dexterity Vest', 10, 20, [1 => 19, 2 => 18, 3 => 17, 4 => 16, 5 => 15, 6 => 14, 7 => 13, 8 => 12, 9 => 11, 10 => 10, 11 => 8, 12 => 6, 13 => 4, 14 => 2, 15 => 0, 16 => 0, 17 => 0, 18 => 0, 19 => 0, 20 => 0, 21 => 0, 22 => 0, 23 => 0, 24 => 0, 25 => 0, 26 => 0, 27 => 0]],
            ['Aged Brie', 2, 0, [1 => 1, 2 => 2, 3 => 4, 4 => 6, 5 => 8, 6 => 10, 7 => 12, 8 => 14, 9 => 16, 10 => 18, 11 => 20, 12 => 22, 13 => 24, 14 => 26, 15 => 28, 16 => 30, 17 => 32, 18 => 34, 19 => 36, 20 => 38, 21 => 40, 22 => 42, 23 => 44, 24 => 46, 25 => 48, 26 => 50, 27 => 50]],
            ['Elixir of the Mongoose', 5, 7, [1 => 6, 2 => 5, 3 => 4, 4 => 3, 5 => 2, 6 => 0, 7 => 0, 8 => 0, 9 => 0, 10 => 0, 11 => 0, 12 => 0, 13 => 0, 14 => 0, 15 => 0, 16 => 0, 17 => 0, 18 => 0, 19 => 0, 20 => 0, 21 => 0, 22 => 0, 23 => 0, 24 => 0, 25 => 0, 26 => 0, 27 => 0]],
            ['Sulfuras, Hand of Ragnaros', 0, 80, [1 => 80, 2 => 80, 3 => 80, 4 => 80, 5 => 80, 6 => 80, 7 => 80, 8 => 80, 9 => 80, 10 => 80, 11 => 80, 12 => 80, 13 => 80, 14 => 80, 15 => 80, 16 => 80, 17 => 80, 18 => 80, 19 => 80, 20 => 80, 21 => 80, 22 => 80, 23 => 80, 24 => 80, 25 => 80, 26 => 80, 27 => 80]],
            ['Sulfuras, Hand of Ragnaros', -1, 80, [1 => 80, 2 => 80, 3 => 80, 4 => 80, 5 => 80, 6 => 80, 7 => 80, 8 => 80, 9 => 80, 10 => 80, 11 => 80, 12 => 80, 13 => 80, 14 => 80, 15 => 80, 16 => 80, 17 => 80, 18 => 80, 19 => 80, 20 => 80, 21 => 80, 22 => 80, 23 => 80, 24 => 80, 25 => 80, 26 => 80, 27 => 80]],
            ['Backstage passes to a TAFKAL80ETC concert', 15, 20, [1 => 21, 2 => 22, 3 => 23, 4 => 24, 5 => 25, 6 => 27, 7 => 29, 8 => 31, 9 => 33, 10 => 35, 11 => 38, 12 => 41, 13 => 44, 14 => 47, 15 => 50, 16 => 0, 17 => 0, 18 => 0, 19 => 0, 20 => 0, 21 => 0, 22 => 0, 23 => 0, 24 => 0, 25 => 0, 26 => 0, 27 => 0]],
            ['Backstage passes to a TAFKAL80ETC concert', 10, 49, [1 => 50, 2 => 50, 3 => 50, 4 => 50, 5 => 50, 6 => 50, 7 => 50, 8 => 50, 9 => 50, 10 => 50, 11 => 0, 12 => 0, 13 => 0, 14 => 0, 15 => 0, 16 => 0, 17 => 0, 18 => 0, 19 => 0, 20 => 0, 21 => 0, 22 => 0, 23 => 0, 24 => 0, 25 => 0, 26 => 0, 27 => 0]],
            ['Backstage passes to a TAFKAL80ETC concert', 5, 49, [1 => 50, 2 => 50, 3 => 50, 4 => 50, 5 => 50, 6 => 0, 7 => 0, 8 => 0, 9 => 0, 10 => 0, 11 => 0, 12 => 0, 13 => 0, 14 => 0, 15 => 0, 16 => 0, 17 => 0, 18 => 0, 19 => 0, 20 => 0, 21 => 0, 22 => 0, 23 => 0, 24 => 0, 25 => 0, 26 => 0, 27 => 0]],
        ];
    }
}
